

<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
    <title>나만의 제주여행계획</title>
    <link rel="stylesheet" href="style.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css">
    <link rel="stylesheet" href="myro.css">
    <link rel="shortcut icon" href="/myro_image/favicon.ico">
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    <link rel="stylesheet" type="text/css" href="materialize.min.css" media="screen,projection" />
    <div>

        <nav class="nav-extended nav-main2">

            <div class="container nav-main2-cont">

                <a href="/"><b>나만의 여행 계획</b><span id="navlongtext">
                        <h7>&nbsp;MAKE YOUR ROUTE OPTIMIZED</h7>
                    </span></a>

                <ul id="menudropUl" class="right">

                    <li><a class="dropdown-trigger" data-target="dropdown1"><b>MENU</b><i class="material-icons right">arrow_drop_down</i></a></li>

                </ul>

            </div>

        </nav>

    </div>
    <div>

        <nav class="nav-extended nav-main2">

            <div class="container nav-main2-cont">

                <a href="/"><b>제주 여행 계획</b><span id="navlongtext">
                        <h7>&nbsp;MAKE YOUR ROUTE OPTIMIZED</h7>
                    </span></a>

                <ul id="menudropUl" class="right">

                    <li><a class="dropdown-trigger" data-target="dropdown1"><b>MENU</b><i class="material-icons right">arrow_drop_down</i></a></li>

                </ul>

            </div>

        </nav>

    </div>

</head>

<body>
    <main>
        <nav1>
            <img class="logoImg" src="img/zz.jpg">
            <div class="nav_box">
                <table>
                    <tr>
                        <td class="nav_menu">&nbsp;&nbsp;1&nbsp;&nbsp;</td>
                        <td class="nav_menu">&nbsp;&nbsp;2&nbsp;&nbsp;</td>
                        <td class="nav_menu">&nbsp;&nbsp;고객센터&nbsp;&nbsp;</td>
                        <td class="nav_menu">&nbsp;&nbsp;<a href="regMemberForm.html">SignUp</a>&nbsp;&nbsp;</td>
                        <td class="nav_menu">&nbsp;&nbsp;<a href="loginForm.html">Login</a>&nbsp;&nbsp;</td>
                    </tr>
                </table>
            </div>
        </nav1>

        <section>
            <div class="login_popUp">
                <span>여행 일정</span>
                <br /><br>
                <form action="index.html">
                <div>Where</div>
                <input type="text" size="45" name="dest">
                <table>
                    <tr>
                        <td>CHECK IN</td>
                        <td>CHECK OUT</td>
                    </tr>
                    <tr>
                        <td><input type="date" size="20" name="check_In_date"/></td>
                        <td><input type="date" size="20" name="check_Out_date"/></td>
                    </tr>
                    <tr>
                        <td>Guest</td>
                    </tr>
                    <tr>
                        <td colspan="2">
                            <input type="number" value="1" size="45" name="Guest_Number" />
                            
                        </td>
                    </tr>
                </table>
                
                <input type="submit" value="Search" class="waves-effect waves-light btn" style="float: right"/>
            </form>
            </div>
   
        </section>
        <div class="mid"> center_menu</div>

        </div>    
        <br><br><br><br><br><br><br><br><br><br>
        <script src="<script src="https://code.jquery.com/jquery-3.6.0.slim.js" integrity="sha256-HwWONEZrpuoh951cQD1ov2HUK5zA5DwJ1DNUXaM6FsY=" crossorigin="anonymous"></script>"></script>
        <div class="map_wrap">
            <div id="map" style="position: relative;overflow: hidden;
            height: 100vh;
            min-height: 100%;
            max-height: noneover;"></div>
        
            <div id="menu_wrap" class="bg_white"style="overflow: hidden;" >
                <div class="option">
                    <div>
                        <form onsubmit="searchPlaces(); return false;">
                            키워드 : <input type="text" value="이태원 맛집" id="keyword" size="15"> 
                            <button type="submit">검색하기</button> 
                        </form>
                    </div>
                </div>wyhy
                <hr>
                <ul id="placesList"></ul>
                <div id="pagination"></div>
            </div>
        </div>
        <div id="myroSidebarTotalDiv">


                <!-- 일정작성 사이드바(왼쪽상단) -->
                <div>

                    <div id="mscon">

                        <!-- 일정 입력 Sidenav -->
                        <ul class="card hoverable z-depth-3 collapsible">

                            <h6 class="center" id="msconFirstText"><b><span data-langNum="17">일정작성</span></b></h6>

                            <a href="/" id="msconMobileClose"><i class="material-icons" style="font-size: 30px;margin-top:3px">keyboard_arrow_left</i></a>

                            <!-- 여행일수 입력 Section -->
                            <li class="center" id="msconFirstLi">

                                <!-- 여행도시 일자 표시 Div -->
                                <div id="traveltextdiv">

                                    <h6><span style="letter-spacing: 1px !important;"><span id="korCityNameMobile"></span><span id="mobileDayText"> : <span id="showingTravelDay">1</span>DAY</span>
                                        </span>
                                    </h6>

                                </div>
                                <!-- 여행일자 입력 Div -->
                                <div class="daycount-main2">

                                    <input type="hidden" value="" id="travelDay">
                                    <!-- blur()는 모바일 input포커스가 될때 키보드가 뜨는 것을 안뜨게 해줌 -->
                                    <input type="text" id="calander" name="daterange" class="center" value="" onfocus="blur()" />

                                </div>
                                <!-- 여행시간 상세설정표시 Div -->
                                <div class="collapsible-header daycollapsible-main1">

                                    <i class="material-icons daycollapsible-mi">schedule</i>
                                    <h7><span data-langNum="18">여행시간 상세설정</span><span id="totalTravelTimeArea"><span data-langNum="19">(총</span> <span id="totalTravelH">12</span><span data-langNum="20">시간</span> <span id="totalTravelM">0</span><span data-langNum="21">분)</span></span>
                                    </h7>
                                    <i id="openAndCloseDailyTimeSetting" title="일자별 시간 설정창 보기" class="material-icons daycollapsible-mi">expand_more</i>

                                </div>

                                <!-- 여행시간 상세설정리스트 Div -->
                                <div class="collapsible-body daycollapsible-main2 center s-border">

                                    <hs style="color:#aaa;"><span data-langNum="22">일자별 시작시간과 종료시간을 설정하세요.</span><br><span data-langNum="23">기본값은 오전10시부터 오후10시까지 12시간입니다.</span></hs>

                                    <div id="dailyTimesSettingArea">

                                    </div>

                                    <button class="btn center collapsibleClosebtn" onclick="closeDailyTimesSettingArea()">설정완료</button>

                                </div>

                            </li>

                            <!-- 버튼 Section -->
                            
                        </ul>

                    </div>

                </div>
                <!-- 모바일화면 장소목록창 백그라운드 배경 -->
                <div class="myro-sidebar-wrap">
                    <span onclick="finishMobileDatePickRedirect()" class="w3-display-topright CloseStyleM">&times;</span>
                </div>

                <!-- 선택장소목록 사이드바(왼쪽하단) -->
                <div class="card z-depth-3 selectCardCss">

                    <div class="center">
                        <h6><b><span data-langNum="24">선택목록</span></b></h6>
                    </div>

                    <div class="center">

                        <ul id="tabs" class="tabs tabs-fixed-width" style="margin-bottom: 5px">
                            <li class="tab" style="margin: 5px;line-height: 1.5;"><a id="selecteHotelsTab" href="#test1" data-langNum="72">호 텔</a></li>
                            <li class="tab" style="margin: 5px;line-height: 1.5;"><a id="selecteSpotsTab" class="active" href="#test2" data-langNum="73">장 소</a></li>

                        </ul>

                    </div>

                   

                    <!-- 장소 선택리스트 Div -->
                    <div id="test2" class="col s12">
                        <div class="center">

                            <span id="seletedSpotsCnt">0</span> <span id="totalSpendingTimeArea"><span data-langNum="19">(총</span><span id="sumOfSpotStayingH">0</span><span data-langNum="20">시간</span><span id="sumOfSpotStayingM">0</span><span data-langNum="21">분)</span></span>

                        </div>
                        <button class="btn center border-radius-none" onclick="removeAllSpotFromSelectedSpots()">
                            <h7 data-langNum="26">장소전체삭제</h7>
                        </button>

                        <ul class="ul-style" id="cart2">

                            <li id="cart2NoList" class="center">
                                <hs><span data-langNum="27">가고 싶은 장소들을 검색하여 추가해주세요.</span><br><span data-langNum="28">설정하신 일자별 여행시간 내에서 </span><br><span data-langNum="29">하루 평균 최대 8개의 장소까지 선택 가능합니다.</span></hs><br><br><i style="cursor: pointer" class="material-icons" onclick="searchSpotKeywordFocus()">add</i>
                            </li>

                        </ul>

                    </div>

                </div>

            </div>
        </div>
    </div>
        <br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br>
    </main>
    <sub>
      
          
        <aside>
            <table>
                <tr>
                    <th>When are you travelling?</th>
                    <td rowspan="2"><a class="waves-effect waves-light btn">Add Dates</a></td>
                </tr>
                <tr>
                    <td>Add dates for updated pricing and availability</td>
                </tr>
            </table>
        </aside>
        <br><br><br><br><br><br><br><br><br>
    </sub>
    <sub>
        <aside>
            
        </aside>
    </sub>
    <footer>
        <div class="footer_grid_container">
            <div class="footer_grid_item">
                <table>
                    <tr>
                        <th>Jeju plan</th>
                    </tr>
                    <tr>
                        <td>Help</td>
                    </tr>
                    <tr>
                        <td>Policies</td>
                    </tr>
                    <tr>
                        <td>Terms</td>
                    </tr>
                    <tr>
                        <td>Privacy</td>
                    </tr>
                </table>
            </div>

            <div class="footer_grid_item">
                <table>
                    <tr>
                        <th>Discover</th>
                    </tr>
                    <tr>
                        <td>Trust & Safety</td>
                    </tr>
                    <tr>
                        <td>Site Map</td>
                    </tr>
                </table>
            </div>

            <div class="footer_grid_item">
                <table>
                    <tr>
                        <th>1</th>
                    </tr>
                    <tr>
                        <td>2</td>
                    </tr>
                    <tr>
                        <td>#</td>
                    </tr>
                    <tr>
                        <td>4</td>
                    </tr>
                </table>
            </div>

            <div class="footer_grid_item">
                <table>
                    <tr>
                        <td><img src="img/facebook.png"></td>
                        <td><img src="img/instagram.png"></td>
                        <td><img src="img/twiter.png"></td>
                    </tr>
                    <tr>
                        <td colspan="3">Terms</td>
                    </tr>
                    <tr>
                        <td colspan="3">privacy</td>
                    </tr>
                    <tr>
                        <td colspan="3">Site Map</td>
                    </tr>
                </table>
            </div>

        </div>
    </footer>
    <p style="margin-top:-12px">
        <em class="link">
            <a href="/web/documentation/#CategoryCode" target="_blank">카테고리 코드목록을 보시려면 여기를 클릭하세요!</a>
        </em>
    </p>
    
    
    
    <script type="text/javascript" src="https://dapi.kakao.com/v2/maps/sdk.js?appkey=4194e039505990c6422204ef768c1fd8&libraries=services"></script>
    <script>
    // 마커를 클릭하면 장소명을 표출할 인포윈도우 입니다
    var infowindow = new kakao.maps.InfoWindow({zIndex:1});
    
    var mapContainer = document.getElementById('map'), // 지도를 표시할 div 
        mapOption = {
            center: new kakao.maps.LatLng(37.566826, 126.9786567), // 지도의 중심좌표
            level: 3 // 지도의 확대 레벨
        };  
    
    // 지도를 생성합니다    
    var map = new kakao.maps.Map(mapContainer, mapOption); 
    
    // 장소 검색 객체를 생성합니다
    var ps = new kakao.maps.services.Places(map); 
    
    // 카테고리로 은행을 검색합니다
    ps.categorySearch('BK9', placesSearchCB, {useMapBounds:true}); 
    
    // 키워드 검색 완료 시 호출되는 콜백함수 입니다
    function placesSearchCB (data, status, pagination) {
        if (status === kakao.maps.services.Status.OK) {
            for (var i=0; i<data.length; i++) {
                displayMarker(data[i]);    
            }       
        }
    }
    
    // 지도에 마커를 표시하는 함수입니다
    function displayMarker(place) {
        // 마커를 생성하고 지도에 표시합니다
        var marker = new kakao.maps.Marker({
            map: map,
            position: new kakao.maps.LatLng(place.y, place.x) 
        });
    
        // 마커에 클릭이벤트를 등록합니다
        kakao.maps.event.addListener(marker, 'click', function() {
            // 마커를 클릭하면 장소명이 인포윈도우에 표출됩니다
            infowindow.setContent('<div style="padding:5px;font-size:12px;">' + place.place_name + '</div>');
            infowindow.open(map, marker);
        });
    }
    var markers = [];

var mapContainer = document.getElementById('map'), // 지도를 표시할 div 
    mapOption = {
        center: new kakao.maps.LatLng(37.566826, 126.9786567), // 지도의 중심좌표
        level: 3 // 지도의 확대 레벨
    };  

// 지도를 생성합니다    
var map = new kakao.maps.Map(mapContainer, mapOption); 

// 장소 검색 객체를 생성합니다
var ps = new kakao.maps.services.Places();  

// 검색 결과 목록이나 마커를 클릭했을 때 장소명을 표출할 인포윈도우를 생성합니다
var infowindow = new kakao.maps.InfoWindow({zIndex:1});

// 키워드로 장소를 검색합니다
searchPlaces();

// 키워드 검색을 요청하는 함수입니다
function searchPlaces() {

    var keyword = document.getElementById('keyword').value;

    if (!keyword.replace(/^\s+|\s+$/g, '')) {
        alert('키워드를 입력해주세요!');
        return false;
    }

    // 장소검색 객체를 통해 키워드로 장소검색을 요청합니다
    ps.keywordSearch( keyword, placesSearchCB); 
}

// 장소검색이 완료됐을 때 호출되는 콜백함수 입니다
function placesSearchCB(data, status, pagination) {
    if (status === kakao.maps.services.Status.OK) {

        // 정상적으로 검색이 완료됐으면
        // 검색 목록과 마커를 표출합니다
        displayPlaces(data);

        // 페이지 번호를 표출합니다
        displayPagination(pagination);

    } else if (status === kakao.maps.services.Status.ZERO_RESULT) {

        alert('검색 결과가 존재하지 않습니다.');
        return;

    } else if (status === kakao.maps.services.Status.ERROR) {

        alert('검색 결과 중 오류가 발생했습니다.');
        return;

    }
}

// 검색 결과 목록과 마커를 표출하는 함수입니다
function displayPlaces(places) {

    var listEl = document.getElementById('placesList'), 
    menuEl = document.getElementById('menu_wrap'),
    fragment = document.createDocumentFragment(), 
    bounds = new kakao.maps.LatLngBounds(), 
    listStr = '';
    
    // 검색 결과 목록에 추가된 항목들을 제거합니다
    removeAllChildNods(listEl);

    // 지도에 표시되고 있는 마커를 제거합니다
    removeMarker();
    
    for ( var i=0; i<places.length; i++ ) {

        // 마커를 생성하고 지도에 표시합니다
        var placePosition = new kakao.maps.LatLng(places[i].y, places[i].x),
            marker = addMarker(placePosition, i), 
            itemEl = getListItem(i, places[i]); // 검색 결과 항목 Element를 생성합니다

        // 검색된 장소 위치를 기준으로 지도 범위를 재설정하기위해
        // LatLngBounds 객체에 좌표를 추가합니다
        bounds.extend(placePosition);

        // 마커와 검색결과 항목에 mouseover 했을때
        // 해당 장소에 인포윈도우에 장소명을 표시합니다
        // mouseout 했을 때는 인포윈도우를 닫습니다
        (function(marker, title) {
            kakao.maps.event.addListener(marker, 'mouseover', function() {
                displayInfowindow(marker, title);
            });

            kakao.maps.event.addListener(marker, 'mouseout', function() {
                infowindow.close();
            });

            itemEl.onmouseover =  function () {
                displayInfowindow(marker, title);
            };

            itemEl.onmouseout =  function () {
                infowindow.close();
            };
        })(marker, places[i].place_name);

        fragment.appendChild(itemEl);
    }

    // 검색결과 항목들을 검색결과 목록 Elemnet에 추가합니다
    listEl.appendChild(fragment);
    menuEl.scrollTop = 0;

    // 검색된 장소 위치를 기준으로 지도 범위를 재설정합니다
    map.setBounds(bounds);
}

// 검색결과 항목을 Element로 반환하는 함수입니다
function getListItem(index, places) {

    var el = document.createElement('li'),
    itemStr = '<span class="markerbg marker_' + (index+1) + '"></span>' +
                '<div class="info">' +
                '   <h5>' + places.place_name + '</h5>';

    if (places.road_address_name) {
        itemStr += '    <span>' + places.road_address_name + '</span>' +
                    '   <span class="jibun gray">' +  places.address_name  + '</span>';
    } else {
        itemStr += '    <span>' +  places.address_name  + '</span>'; 
    }
                 
      itemStr += '  <span class="tel">' + places.phone  + '</span>' +
                '</div>';           

    el.innerHTML = itemStr;
    el.className = 'item';

    return el;
}

// 마커를 생성하고 지도 위에 마커를 표시하는 함수입니다
function addMarker(position, idx, title) {
    var imageSrc = 'https://t1.daumcdn.net/lo   calimg/localimages/07/mapapidoc/marker_number_blue.png', // 마커 이미지 url, 스프라이트 이미지를 씁니다
        imageSize = new kakao.maps.Size(36, 37),  // 마커 이미지의 크기
        imgOptions =  {
            spriteSize : new kakao.maps.Size(36, 691), // 스프라이트 이미지의 크기
            spriteOrigin : new kakao.maps.Point(0, (idx*46)+10), // 스프라이트 이미지 중 사용할 영역의 좌상단 좌표
            offset: new kakao.maps.Point(13, 37) // 마커 좌표에 일치시킬 이미지 내에서의 좌표
        },
        markerImage = new kakao.maps.MarkerImage(imageSrc, imageSize, imgOptions),
            marker = new kakao.maps.Marker({
            position: position, // 마커의 위치
            image: markerImage 
        });

    marker.setMap(map); // 지도 위에 마커를 표출합니다
    markers.push(marker);  // 배열에 생성된 마커를 추가합니다

    return marker;
}

// 지도 위에 표시되고 있는 마커를 모두 제거합니다
function removeMarker() {
    for ( var i = 0; i < markers.length; i++ ) {
        markers[i].setMap(null);
    }   
    markers = [];
}

// 검색결과 목록 하단에 페이지번호를 표시는 함수입니다
function displayPagination(pagination) {
    var paginationEl = document.getElementById('pagination'),
        fragment = document.createDocumentFragment(),
        i; 

    // 기존에 추가된 페이지번호를 삭제합니다
    while (paginationEl.hasChildNodes()) {
        paginationEl.removeChild (paginationEl.lastChild);
    }

    for (i=1; i<=pagination.last; i++) {
        var el = document.createElement('a');
        el.href = "#";
        el.innerHTML = i;

        if (i===pagination.current) {
            el.className = 'on';
        } else {
            el.onclick = (function(i) {
                return function() {
                    pagination.gotoPage(i);
                }
            })(i);
        }

        fragment.appendChild(el);
    }
    paginationEl.appendChild(fragment);
}

// 검색결과 목록 또는 마커를 클릭했을 때 호출되는 함수입니다
// 인포윈도우에 장소명을 표시합니다
function displayInfowindow(marker, title) {
    var content = '<div style="padding:5px;z-index:1;">' + title + '</div>';

    infowindow.setContent(content);
    infowindow.open(map, marker);
}

 // 검색결과 목록의 자식 Element를 제거하는 함수입니다
function removeAllChildNods(el) {   
    while (el.hasChildNodes()) {
        el.removeChild (el.lastChild);
    }
}
    </script>
    <script src="myro2_lang_javascript.js"></script>
    <script src="myro2_lang_html.js"></script>
    <script src="cookie.js"></script>
    <script src="Sortable.js"></script>
    <script src="polyfill.min.js"></script>
    <script src="moment.min.js"></script>
    <script src="daterangepicker.min.js"></script>
    <script src="/socket.io/socket.io.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.11.4/jquery-ui.min.js" type="text/javascript"></script>
    <script src="materialize.js"></script>
    <script src="timepicki.js"></script>
    <script src="myro2.js"></script>
    <script src="myro2-2.js"></script>
</body>

</html>